import serial
import time
song_twinkle= [
    261, 261, 392, 392, 440, 440, 392,
    349, 349, 330, 330, 294, 294, 261,
    392, 392, 349, 349, 330, 330, 294,
    392, 392, 349, 349, 330, 330, 294,
    261, 261, 392, 392, 440, 440, 392,
    349, 349, 330, 330, 294, 294, 261
]
note_length_twinkle = [
    1, 1, 1, 1, 1, 1, 2,
    1, 1, 1, 1, 1, 1, 2,
    1, 1, 1, 1, 1, 1, 2,
    1, 1, 1, 1, 1, 1, 2,
    1, 1, 1, 1, 1, 1, 2,
    1, 1, 1, 1, 1, 1, 2
]
taiko_twinkle = [
    1,1,2,2,1,1,2,
    1,1,2,2,1,1,2,
    1,1,2,2,1,1,2,
    1,1,2,2,1,1,2,
    1,1,2,2,1,1,2,
    1,1,2,2,1,1,2
]
song_bee = [
    392,330,330,349,294,294,
    262,294,330,349,392,392,392,
    392,330,330,349,294,294,
    262,330,392,392,262
]
note_length_bee = [
    1,1,2,1,1,2,
    1,1,1,1,1,1,2,
    1,1,2,1,1,2,
    1,1,1,1,4
]
taiko_bee = [
    1,1,2,1,1,2,
    1,2,1,2,1,1,1,
    1,1,2,1,1,2,
    1,2,1,1,2
]

song_happybirthday = [
    262,262,294,262,349,330,
    262,262,294,262,392,349,
    262,262,523,440,349,330,294,
    466,466,440,349,392,349
]
note_length_happybirthday = [
    1,1,2,2,2,4,
    1,1,2,2,2,4,
    1,1,2,2,2,2,2,
    1,1,2,2,2,4
]
taiko_happybirthday = [
    1,1,2,1,2,1,
    1,1,2,1,2,1,
    1,1,2,2,2,2,1,
    1,1,2,1,2,1
]
song_stranger_in_the_north = [
    783,622,587,622,622,622,698,783,830,0,830,830,830,783,698,830,783,622,622,698,783,698,
    391,783,622,587,622,587,523,622,622,622,698,783,830,0,830,830,830,783,698,830,783,622,622,698,783,698

    #466,523,523,523,523,523,523,523,466,
   # 523,523,523,523,523,523,523,523,523,0  ,
   # 466,523,523,523,523,523,523,523,523,466,523,523,466,523,523,466,622,
   # 0  ,466,523,523,523,466,523,391,466,523,523,523,523,523,523,523,466,523,
   # 523,523,523,391,523,523,523,523,523,466,523,466,391,0  ,
   # 523,523,523,523,523,523,523,523,466,523,523,523,
   # 523,523,523,466,523,523,523,523,466,523,523,523,466,523,523,523,523,523,523,523
]
note_length_stranger_in_the_north = [
    5,5,5,9,5,5,5,5,5,8,3,3,5,5,5,7,7,5,5,5,5,9,
    5,5,5,5,6,3,7,3,3,5,5,5,5,8,3,3,5,5,5,6,7,5,5,5,5,9
   # 5  ,5  ,3  ,3  ,1  ,1  ,3  ,3  ,3  ,
   # 3  ,3  ,3  ,1  ,1  ,3  ,3  ,3  ,3  ,3  ,
   # 3  ,3  ,1  ,1  ,3  ,1  ,1  ,3  ,3  ,3  ,3  ,3  ,3  ,3  ,3  ,3  ,3  ,
   # 5  ,3  ,3  ,3  ,3  ,3  ,3  ,5  ,3  ,3  ,3  ,3  ,3  ,3  ,3  ,3  ,3  ,3  ,
   # 3  ,3  ,3  ,3  ,3  ,3  ,3  ,1  ,1  ,3  ,3  ,3  ,3  ,3  ,
   # 3  ,3  ,3  ,5  ,5  ,3  ,3  ,3  ,3  ,3  ,3  ,5  ,
  #  3  ,3  ,3  ,3  ,3  ,3  ,3  ,1  ,1  ,3  ,3  ,3  ,3  ,3  ,3  ,5  ,3  ,3  ,3  ,3  

]
taiko_stranger_in_the_north = [
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
   # 1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,
   # 1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,
   # 1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,
   # 1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,
   # 1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,
  #  1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,
   # 1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  
]
song_odd_mac_had_a_farm = [
    391,391,391,293,329,329,293,493,493,440,440,391,293,391,391,391,293,329,
    329,293,493,493,440,440,391,293,293,391,391,391,293,293,391,391,391,391,
    391,391,391,391,391,391,391,391,391,391,391,391,391,391,293,329,329,293,
    493,493,440,440,391
]
note_length_odd_mac_had_a_farm = [
    2  ,2  ,2  ,2  ,2  ,2  ,4  ,2  ,2  ,2  ,2  ,3  ,2  ,2  ,2  ,2  ,2  ,2  ,
    2  ,4  ,2  ,2  ,2  ,2  ,3  ,1  ,1  ,2  ,2  ,2  ,1  ,1  ,2  ,2  ,4  ,1  ,
    1  ,2  ,1  ,1  ,2  ,1  ,1  ,1  ,1  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,4  ,
    2  ,2  ,2  ,2  ,8
]
taiko_odd_mac_had_a_farm = [
    1  ,1  ,1  ,1  ,1  ,1  ,2  ,1  ,1  ,1  ,1  ,2  ,1  ,1  ,1  ,1  ,1  ,1  ,
    1  ,2  ,1  ,1  ,1  ,1  ,2  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,2  ,1  ,
    1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,2  ,
    1  ,1  ,1  ,1  ,2
]
song_GOOBYE = [
    493,391,293,493,391,293,493,391,293,493,391,293,493,391,293,391,493,391,293,493,391,293,440,391,293,440,391,293,440,391,293,391,
    0  ,587,587,587,587,391,587,587,587,587,587,391,440,0  ,391,440,587,587,587,587,587,391,587,587,587,587,587,391,440,
    0  ,659,739,783,783,783,783,783,739,659,659,659,587,587,587,587,587,587,523,493,440,391,440,587,587,587,587,587,391,587,587,587,587,391,440,
    0  ,783,739,659,739,783,1174,1174,783,783,1174,1174,783,783,1174,1174,783,880,
    783,739,659,739,783,1174,1174,783,783,1174,1174,783,783,1174,1174,783,880,
    783,739,659,587,659,783,783,587,523,783,783,587,587,880,880,783,880,
    0  ,659,739,783,1174,
    0  ,783,1174,1174,783,880
]
note_length_GOOBYE =[
    2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,2  ,
    2  ,2  ,2  ,2  ,4  ,2  ,4  ,2  ,2  ,2  ,4  ,2  ,18 ,8  ,2  ,4  ,4  ,2  ,2  ,2  ,2  ,4  ,4  ,2  ,2  ,2  ,4  ,2  ,18 ,
    8  ,2  ,4  ,4  ,2  ,2  ,2  ,2  ,2  ,2  ,10 ,2  ,4  ,4  ,2  ,2  ,2  ,2  ,2  ,2  ,10 ,2  ,4  ,4  ,2  ,2  ,2  ,2  ,4  ,4  ,2  ,4  ,4  ,2  ,18 ,
    8  ,2  ,2  ,2  ,2  ,4  ,4  ,4  ,2  ,4  ,4  ,6  ,4  ,4  ,4  ,2  ,4  ,10 ,
    2  ,2  ,2  ,2  ,4  ,4  ,4  ,2  ,4  ,4  ,6  ,4  ,4  ,4  ,2  ,4  ,10 ,
    2  ,2  ,2  ,2  ,4  ,4  ,4  ,2  ,4  ,4  ,6  ,4  ,4  ,4  ,2  ,4  ,10  ,
    4  ,2  ,2  ,4  ,8  ,
    2  ,2  ,4  ,4  ,4  ,20 
]

taiko_GOOBYE = [
    1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,1  ,
    0  ,1  ,1  ,1  ,2  ,1  ,2  ,1  ,1  ,1  ,2  ,1  ,2  ,0  ,1  ,2  ,2  ,1  ,1  ,1  ,1  ,2  ,2  ,1  ,1  ,1  ,2  ,1  ,2  ,
    0  ,1  ,2  ,2  ,1  ,1  ,1  ,1  ,1  ,1  ,2  ,1  ,2  ,2  ,1  ,1  ,1  ,1  ,1  ,1  ,2  ,1  ,2  ,2  ,1  ,1  ,1  ,1  ,2  ,2  ,1  ,2  ,2  ,1  ,2  ,
    0  ,1  ,1  ,1  ,1  ,2  ,2  ,2  ,1  ,2  ,2  ,2  ,2  ,2  ,2  ,1  ,2  ,2  ,
    1  ,1  ,1  ,1  ,2  ,2  ,2  ,1  ,2  ,2  ,2  ,2  ,2  ,2  ,1  ,2  ,2  ,
    1  ,1  ,1  ,1  ,2  ,2  ,2  ,1  ,2  ,2  ,2  ,2  ,2  ,2  ,1  ,2  ,2  ,
    0  ,1  ,1  ,2  ,2  ,
    0  ,1  ,2  ,2  ,1  ,2 
]
song_the_doll_in_the_garden = [
    391,391,329,293,329,293,261,329,293,261,
    220,196,220,196,220,220,261,220,261,293,
    329,293,293,391,391,329,293,261
]

note_length_the_doll_in_the_garden = [
    12 ,4  ,8  ,8  ,8  ,8  ,16 ,12 ,4  ,8  ,
    8  ,8  ,8  ,16 ,12 ,4  ,8  ,8  ,8  ,8  ,
    16 ,12 ,4  ,8  ,8  ,8  ,8  ,16 
]
taiko_the_doll_in_the_garden = [
    1  ,1  ,1  ,1  ,1  ,1  ,2  ,1  ,1  ,1  ,
    1  ,1  ,1  ,2  ,1  ,1  ,1  ,1  ,1  ,1  ,
    2  ,1  ,1  ,1  ,1  ,1  ,1  ,2
]

song_home = [
    523,493,440,391,391,440,523,391,440,391,329,
    293,391,329,0  ,523,493,440,391,391,440,523,391,
    440,391,329,293,391,261,0  ,293,329,293,391,440,
    391,440,523,587,523,493,440,587,391,0  ,440,523,
    391,440,329,391,440,391,329,293,329,391,329,
    293,261,0
]
note_length_home = [
    8  ,4  ,4  ,8  ,8  ,8  ,8  ,16 ,8  ,4  ,4  ,
    8  ,8  ,24 ,8  ,8  ,4  ,4  ,8  ,8  ,8  ,8  ,16 ,
    8  ,4  ,4  ,8  ,8  ,24 ,8  ,8  ,4  ,4  ,16 ,8  ,
    4  ,4  ,16 ,8  ,4  ,4  ,8  ,8  ,24 ,8  ,8  ,8  ,
    8  ,8  ,8  ,4  ,4  ,8  ,8  ,8  ,4  ,4  ,8  ,
    8  ,24 ,8 
]
taiko_home = [
    1  ,1  ,0  ,1  ,1  ,1  ,1  ,2  ,1  ,1  ,0  ,
    1  ,1  ,2  ,0  ,1  ,1  ,0  ,1  ,1  ,1  ,1  ,2  ,
    1  ,1  ,0  ,1  ,1  ,2  ,0  ,1  ,1  ,0  ,2  ,1  ,
    1  ,0  ,2  ,1  ,1  ,0  ,1  ,1  ,2  ,0  ,1  ,1  ,
    1  ,1  ,1  ,1  ,0  ,1  ,1  ,1  ,1  ,0  ,1  ,
    1  ,2  ,0
]
song_two_tiger=[
    261,294,330,261,261,294,330,261,330,349,392,330,349,392,
    392,440,392,349,330,261,392,440,392,349,330,261,261,196,
    261,261,196,261
    ]
note_length_two_tiger=[
    2,2,2,2,2,2,2,2,
    2,2,4,2,2,4,
    1,1,1,1,2,2,1,1,1,1,2,2,
    2,2,4,2,2,4
    ]
taiko_two_tiger = [
    1,1,1,1,1,1,1,1,
    1,1,2,1,1,2,
    1,0,1,0,1,1,1,0,1,0,1,1,
    1,1,2,1,1,2
]
song_list=[song_twinkle,song_bee,song_happybirthday,song_stranger_in_the_north,song_odd_mac_had_a_farm,song_GOOBYE,song_the_doll_in_the_garden,song_home,
            song_two_tiger]
note_length_list = [note_length_twinkle,note_length_bee,note_length_happybirthday,note_length_stranger_in_the_north,
                    note_length_odd_mac_had_a_farm,note_length_GOOBYE,note_length_the_doll_in_the_garden,note_length_home,note_length_two_tiger]  
taiko_list = [taiko_twinkle,taiko_bee,taiko_happybirthday,taiko_stranger_in_the_north,taiko_odd_mac_had_a_farm,taiko_GOOBYE,taiko_the_doll_in_the_garden,
              taiko_home,taiko_two_tiger]
song_name = ["Twinkle Twinkle Little Star","Little Bee","Happy Birthday To You","stranger in the north","Old MacDonald Had a Farm","GoodBye",
             "The Doll In The Garden","Home","Two Tiger"]
song_speed = [70,50,30,10,20,10,5,5,20]
formatter = lambda x:"%d" %x

serdev = '/dev/ttyACM0'
s = serial.Serial(serdev)

def load_song(i):
    song = song_list[i]
    note_length = note_length_list[i]
    taiko = taiko_list[i]
    print("sending signal")
    for data in song:
        print (formatter(data).zfill(4))
        s.write(bytes(formatter(data).zfill(4),'UTF-8'))
        time.sleep(0.1)
    for data in note_length:
        print (formatter(data).zfill(4))
        s.write(bytes(formatter(data).zfill(4),'UTF-8'))
        time.sleep(0.1)
    for data in taiko:
        print (formatter(data).zfill(4))
        s.write(bytes(formatter(data).zfill(4),'UTF-8'))
        time.sleep(0.1)
def load_song_name(i):
    name = song_name[i]+"#"
    print (name)
    s.write(bytes(name,'UTF-8'))
    time.sleep(0.1) 
print ("------------------song list----------------------")
for song in song_name:
    print(str(song_name.index(song)+1)+ ". "+str(song))
print()
print("select the songs you want to load (limit 12) press y to comfirm")
#num_load_song = int (input("number of song you want to load ?"))
song_want_to_load = []
num = ["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Nineth","Tenth","Elevent","Twelve","Thirteen"]
#for i in range(0,num_load_song):
    #song_want_to_load.append(int(input(num[i]+" num is: "))-1)
#print("the song you want to load is "+str(song_want_to_load)+"?")
i=0
while True:
    in_num = input(num[i]+" num is: ")
    if in_num != 'y':
        song_want_to_load.append(int(in_num)-1)
        i=i+1
    else:
        break
print(formatter(len(song_want_to_load)).zfill(4))
s.write(bytes(formatter(len(song_want_to_load)).zfill(4),'UTF-8'))
time.sleep(0.1)
for i in song_want_to_load:
    print(formatter(len(song_list[i])).zfill(4))
    s.write(bytes(formatter(len(song_list[i])).zfill(4),'UTF-8'))
    time.sleep(0.1)
for i in song_want_to_load:
    print(formatter(song_speed[i]).zfill(4))
    s.write(bytes(formatter(song_speed[i]).zfill(4),'UTF-8'))
    time.sleep(0.1)
for i in song_want_to_load:
    load_song(i)
for i in song_want_to_load:
    load_song_name(i)
s.close()